{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useFonts } from \"expo-font\";\nimport { getFirestore, updateDoc, doc } from \"firebase/firestore\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../UserContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Topbar() {\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser;\n\n  var _useFonts = useFonts({\n    RetroGaming: require(\".././assets/fonts/RetroGaming-Regular.ttf\")\n  }),\n      _useFonts2 = _slicedToArray(_useFonts, 1),\n      loaded = _useFonts2[0];\n\n  if (!loaded) return null;\n  var db = getFirestore();\n  var currentLevel = Math.floor(0.07 * Math.sqrt(user[\"currentXp\"]));\n  var xpAtNextLevel = Math.floor(Math.pow((currentLevel + 1) / 0.07, 2));\n  var xpToReachCurrentLevel = Math.floor(Math.pow(currentLevel / 0.07, 2));\n  updateDoc(doc(db, \"users\", user[\"email\"]), {\n    level: currentLevel\n  }).then(function () {\n    setUser({\n      activeQuest: user[\"activeQuest\"],\n      avatar: user[\"avatar\"],\n      coins: user[\"coins\"],\n      currentXp: user[\"currentXp\"],\n      diamonds: user[\"diamonds\"],\n      displayName: user[\"displayName\"],\n      email: user[\"email\"],\n      emotes: user[\"emotes\"],\n      items: user[\"items\"],\n      level: currentLevel,\n      multiplier: user[\"multiplier\"],\n      questsDone: user[\"questsDone\"],\n      tasks: user[\"tasks\"]\n    });\n  });\n  return _jsxs(View, {\n    style: styles.header,\n    children: [_jsxs(View, {\n      style: styles.levels,\n      children: [_jsx(View, {\n        style: styles.level,\n        children: _jsx(Text, {\n          style: styles.levelText,\n          children: user[\"level\"]\n        })\n      }), _jsx(View, {\n        style: styles.progress,\n        children: _jsxs(Text, {\n          style: styles.progressText,\n          children: [user[\"currentXp\"] - xpToReachCurrentLevel, \"/\", xpAtNextLevel - xpToReachCurrentLevel]\n        })\n      })]\n    }), _jsxs(View, {\n      style: styles.diamonds,\n      children: [_jsx(Image, {\n        style: styles.icon,\n        resizeMode: \"contain\",\n        source: require(\".././assets/ruby.png\")\n      }), _jsx(Text, {\n        style: styles.iconText,\n        children: user[\"diamonds\"]\n      })]\n    }), _jsxs(View, {\n      style: styles.diamonds,\n      children: [_jsx(Image, {\n        style: styles.icon,\n        resizeMode: \"contain\",\n        source: require(\".././assets/coin.png\")\n      }), _jsx(Text, {\n        style: styles.iconText,\n        children: user[\"coins\"]\n      })]\n    })]\n  });\n}\n\nvar styles = StyleSheet.create({\n  header: {\n    width: \"100%\",\n    height: 50,\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    backgroundColor: \"#1F2025\",\n    position: \"absolute\",\n    zIndex: 2\n  },\n  level: {\n    backgroundColor: \"#20A4A4\",\n    height: 40,\n    width: 40,\n    flex: 0.3,\n    padding: 0\n  },\n  levelText: {\n    color: \"white\",\n    fontSize: 30,\n    padding: 0,\n    width: 40,\n    height: 40,\n    textAlign: \"center\",\n    marginVertical: \"auto\",\n    fontFamily: \"RetroGaming\"\n  },\n  levels: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flex: 1,\n    alignItems: \"center\",\n    marginLeft: 15\n  },\n  diamonds: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flex: 1\n  },\n  progress: {\n    flex: 0.5,\n    backgroundColor: \"#67CACA\"\n  },\n  progressText: {\n    color: \"white\",\n    textAlign: \"center\",\n    padding: 0,\n    fontSize: 15,\n    fontFamily: \"RetroGaming\"\n  },\n  icon: {\n    width: 30,\n    height: 30\n  },\n  iconText: {\n    color: \"white\",\n    fontFamily: \"RetroGaming\"\n  }\n});\nexport default Topbar;","map":{"version":3,"sources":["/home/aadivyaraushan/Documents/GitHub/nocrastination/components/Topbar.js"],"names":["useFonts","getFirestore","updateDoc","doc","useContext","UserContext","Topbar","user","setUser","RetroGaming","require","loaded","db","currentLevel","Math","floor","sqrt","xpAtNextLevel","xpToReachCurrentLevel","level","then","activeQuest","avatar","coins","currentXp","diamonds","displayName","email","emotes","items","multiplier","questsDone","tasks","styles","header","levels","levelText","progress","progressText","icon","iconText","StyleSheet","create","width","height","flexDirection","justifyContent","backgroundColor","position","zIndex","flex","padding","color","fontSize","textAlign","marginVertical","fontFamily","display","alignItems","marginLeft"],"mappings":"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","sourcesContent":["import { StyleSheet, View, Text, Image } from \"react-native\";\nimport { useFonts } from \"expo-font\";\nimport { getFirestore, updateDoc, doc } from \"firebase/firestore\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../UserContext\";\n\nfunction Topbar() {\n  const { user, setUser } = useContext(UserContext);\n  const [loaded] = useFonts({\n    RetroGaming: require(\".././assets/fonts/RetroGaming-Regular.ttf\"),\n  });\n\n  if (!loaded) return null;\n\n  const db = getFirestore();\n\n  // Level XP calculations\n  // const xpToNextLevel = Math.floor(user[\"level\"] * 100 * user[\"multiplier\"]);\n  // const level = Math.floor(\n  //   (1 + Math.sqrt(1 + (8 * user[\"currentXp\"]) / 50)) / 2\n  // );\n\n  const currentLevel = Math.floor(0.07 * Math.sqrt(user[\"currentXp\"]));\n  const xpAtNextLevel = Math.floor(((currentLevel + 1) / 0.07) ** 2);\n  const xpToReachCurrentLevel = Math.floor((currentLevel / 0.07) ** 2);\n\n  updateDoc(doc(db, \"users\", user[\"email\"]), {\n    level: currentLevel,\n  }).then(() => {\n    setUser({\n      activeQuest: user[\"activeQuest\"],\n      avatar: user[\"avatar\"],\n      coins: user[\"coins\"],\n      currentXp: user[\"currentXp\"],\n      diamonds: user[\"diamonds\"],\n      displayName: user[\"displayName\"],\n      email: user[\"email\"],\n      emotes: user[\"emotes\"],\n      items: user[\"items\"],\n      level: currentLevel,\n      multiplier: user[\"multiplier\"],\n      questsDone: user[\"questsDone\"],\n      tasks: user[\"tasks\"],\n    });\n  });\n\n  return (\n    <View style={styles.header}>\n      <View style={styles.levels}>\n        <View style={styles.level}>\n          <Text style={styles.levelText}>{user[\"level\"]}</Text>\n        </View>\n        <View style={styles.progress}>\n          <Text style={styles.progressText}>\n            {user[\"currentXp\"] - xpToReachCurrentLevel}/\n            {xpAtNextLevel - xpToReachCurrentLevel}\n          </Text>\n        </View>\n      </View>\n      <View style={styles.diamonds}>\n        <Image\n          style={styles.icon}\n          resizeMode={\"contain\"}\n          source={require(\".././assets/ruby.png\")}\n        />\n        <Text style={styles.iconText}>{user[\"diamonds\"]}</Text>\n      </View>\n      <View style={styles.diamonds}>\n        <Image\n          style={styles.icon}\n          resizeMode={\"contain\"}\n          source={require(\".././assets/coin.png\")}\n        />\n        <Text style={styles.iconText}>{user[\"coins\"]}</Text>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  header: {\n    width: \"100%\",\n    height: 50,\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    backgroundColor: \"#1F2025\",\n    position: \"absolute\",\n    zIndex: 2,\n  },\n  level: {\n    backgroundColor: \"#20A4A4\",\n    height: 40,\n    width: 40,\n    flex: 0.3,\n    padding: 0,\n  },\n  levelText: {\n    color: \"white\",\n    fontSize: 30,\n    padding: 0,\n    width: 40,\n    height: 40,\n    textAlign: \"center\",\n    marginVertical: \"auto\",\n    fontFamily: \"RetroGaming\",\n  },\n  levels: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flex: 1,\n    alignItems: \"center\",\n    marginLeft: 15,\n  },\n  diamonds: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flex: 1,\n  },\n  progress: {\n    flex: 0.5,\n    backgroundColor: \"#67CACA\",\n  },\n  progressText: {\n    color: \"white\",\n    textAlign: \"center\",\n    padding: 0,\n    fontSize: 15,\n    fontFamily: \"RetroGaming\",\n  },\n  icon: {\n    width: 30,\n    height: 30,\n  },\n  iconText: {\n    color: \"white\",\n    fontFamily: \"RetroGaming\",\n  },\n});\n\nexport default Topbar;\n"]},"metadata":{},"sourceType":"module"}